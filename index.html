<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Multi-Video Summarization Annotation</title>
    <link rel="stylesheet" href="css/style.css">
</head>
<body>
    <div class="main-container">
        <!-- Instructions Section -->
        <div class="instructions-section">
            <h2>Multi-Video Summarization</h2>
            <p>This video contains 5 concatenated videos about the location. Select the most representative, impressive, and unique segments.</p>
        </div>

        <!-- Progress Dashboard -->
        <div class="progress-dashboard">
            <div class="progress-stats">
                <div class="stat-box" id="total-stat">
                    <div class="stat-value" id="total-segments">0</div>
                    <div class="stat-label">Total Segments</div>
                </div>
                <div class="stat-box" id="selected-stat">
                    <div class="stat-value" id="selected-segments">0</div>
                    <div class="stat-label">Selected</div>
                </div>
                <div class="stat-box" id="duration-stat">
                    <div class="stat-value" id="selected-duration-display">0s</div>
                    <div class="stat-label">Selected Duration</div>
                </div>
                <div class="stat-box warning" id="percentage-stat">
                    <div class="stat-value" id="percentage-display">0%</div>
                    <div class="stat-label">Of Total (Target: 5-15%)</div>
                </div>
            </div>
        </div>

        <!-- Video Container -->
        <div class="video-container">
            <video class="video-player" id="concat-video-player" controls>
                <!-- Source will be set dynamically -->
            </video>
            
            <div class="video-progress-container" id="progress-container" onclick="seekVideo(event)">
                <div class="video-progress-bar" id="progress-bar"></div>
                <div id="segment-blocks"></div>
                <div class="playhead" id="playhead" style="left: 0%;"></div>
            </div>
            
            <div class="time-labels">
                <span id="current-time">0:00</span>
                <button class="include-current-btn" onclick="includeCurrentSegment()">Include Current Segment</button>
                <span id="total-time">0:00</span>
            </div>
            
            <!-- Preview Controls -->
            <div class="video-controls">
                <button class="video-preview-button" id="preview-btn" onclick="startPreview()" disabled>
                    <span>▶</span> Preview Selected Segments
                </button>
                <button class="video-stop-button hidden" id="stop-btn" onclick="stopPreview()">
                    <span>■</span> Stop Preview
                </button>
                <div class="video-preview-status hidden" id="preview-status">
                    <span class="video-preview-label">Playing:</span>
                    <span class="video-preview-info" id="preview-info"></span>
                </div>
            </div>
        </div>

        <!-- Segments Grid -->
        <div class="segments-container">
            <div class="segments-grid" id="segments-grid">
                <!-- Segments will be dynamically generated -->
            </div>
        </div>

        <!-- Save Button -->
        <div style="text-align: center; margin: 40px 0; padding: 20px;">
            <button class="save-button" onclick="saveResults()">Save Results</button>
        </div>
    </div>
    <script src="js/annotation.js"></script>
</body>
</html>